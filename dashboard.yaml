views:
  - title: Overview
    icon: mdi:sun-compass
    cards:
      - type: entities
        entities:
          - entity: sensor.sigen_plant_active_power
            secondary_info: last-updated
            icon: mdi:lightning-bolt-circle
            name: Total power
          - entity: sensor.sigen_max_active_power
            icon: mdi:lightning-bolt-outline
            name: Max Total power
            secondary_info: last-updated
          - entity: sensor.sigen_ess_charge_discharge_power
            name: Battery charge / discharge
            secondary_info: none
            icon: mdi:battery-charging
          - entity: sensor.sigen_grid_sensor_active_power
            name: Grid import / export
            icon: mdi:transmission-tower
            secondary_info: last-updated
          - entity: sensor.sigen_grid_sensor_import_power
            name: Import from Grid
            icon: mdi:transmission-tower-export
            secondary_info: last-updated
          - entity: sensor.sigen_grid_sensor_export_power
            name: Export to Grid
            icon: mdi:transmission-tower-import
            secondary_info: last-updated
          - entity: sensor.sigen_pv_power
            icon: mdi:solar-power-variant-outline
            name: Solar power production
            secondary_info: last-updated
        title: Power
      - type: entities
        entities:
          - entity: sensor.sigen_daily_energy_production
            name: Daily solar production
            secondary_info: last-updated
            icon: mdi:solar-power
          - entity: sensor.sigen_daily_energy_consumption
            name: Daily energy consumption
            icon: mdi:home-lightning-bolt-outline
            secondary_info: last-updated
          - entity: sensor.sigen_daily_grid_energy_export
            secondary_info: last-updated
            name: 'Daily Energy export to Grid '
            icon: mdi:transmission-tower-import
          - entity: sensor.sigen_daily_grid_energy_import
            name: 'Daily Energy import to Grid '
            secondary_info: last-updated
            icon: mdi:transmission-tower-export
          - entity: sensor.sigendev_daily_charge_energy
            name: Daily battery charge
            icon: mdi:battery-positive
          - entity: sensor.sigendev_daily_discharge_energy
            secondary_info: last-updated
            icon: mdi:battery-negative
            name: Daily battery discharge
        title: Daily Energy
      - type: entities
        entities:
          - entity: sensor.sigen_accumulated_pv_energy_production
            name: Solar production
            secondary_info: last-updated
            icon: mdi:solar-power
          - entity: sensor.sigen_accumulated_energy_consumption
            name: Energy consumption
            icon: mdi:home-lightning-bolt-outline
            secondary_info: last-updated
          - entity: sensor.sigen_accumulated_grid_energy_export
            secondary_info: last-updated
            name: 'Energy export to Grid '
            icon: mdi:transmission-tower-import
          - entity: sensor.sigen_accumulated_grid_energy_import
            name: 'Energy import to Grid '
            secondary_info: last-updated
            icon: mdi:transmission-tower-export
          - entity: sensor.sigenstor_accumulated_charge_energy
            name: Battery charged
            icon: mdi:battery-positive
            secondary_info: last-updated
          - entity: sensor.sigenstor_accumulated_discharge_energy
            name: Battery discharged
            icon: mdi:battery-negative
            secondary_info: last-updated
        title: Total Energy
      - type: gauge
        entity: sensor.sigen_energy_storage_system_soc
        min: 0
        max: 100
        severity:
          green: 70
          yellow: 40
          red: 20
        name: Battery
      - show_name: true
        show_icon: true
        show_state: true
        type: glance
        entities:
          - entity: sun.sun
          - entity: binary_sensor.sigen_pv_generating
            name: PV Generating
          - entity: binary_sensor.sigen_battery_charging
            name: Battery charging
          - entity: binary_sensor.sigen_battery_discharging
            name: Battery discharging
          - entity: binary_sensor.sigen_exporting_to_grid
            name: Exporting to grid
          - entity: binary_sensor.sigen_importing_from_grid
            name: Importing from grid
          - entity: sensor.sigenstor_inverter_temperature
            name: Inverter temp.
          - entity: sensor.sigenstor_ess_average_cell_temperature
            name: Battery temp.
        title: Status
        columns: 3
        state_color: true
      - chart_type: line
        period: 5minute
        type: statistics-graph
        entities:
          - entity: sensor.sigen_pv_power
            name: Solar
          - entity: sensor.sigen_battery_power
            name: Battery
          - entity: sensor.sigen_grid_sensor_import_power
            name: Import
          - entity: sensor.sigen_grid_sensor_export_power
            name: Export
          - entity: sensor.sigen_consumed_power
            name: Consumption
        stat_types:
          - mean
        title: Power distribution last 24 hours
        hide_legend: false
        logarithmic_scale: false
        days_to_show: 1
      - type: entities
        entities:
          - entity: sensor.sigenstor_ess_soc
          - entity: sensor.sigen_ess_charge_discharge_power
        title: Battery
      - type: entities
        entities:
          - entity: input_select.set_sigen_plant_run_mode
          - entity: sensor.sigen_plant_running_state
          - entity: sensor.sigen_running_state
          - entity: sensor.sigen_ems_working_mode
          - entity: sensor.sigen_remote_ems_control_mode_2
          - entity: input_select.set_sigen_remote_ems
          - entity: input_select.set_sigen_remote_ems_control_mode
          - entity: sensor.sigen_remote_ems_control_mode_code
  - title: Detailed Info
    icon: mdi:solar-power-variant-outline
    cards:
      - type: entities
        entities:
          - entity: sensor.total_dc_power
          - entity: sensor.meter_active_power
          - entity: sensor.load_power
          - entity: sensor.export_power
          - entity: sensor.import_power
          - entity: sensor.battery_charging_power
          - entity: sensor.battery_discharging_power
        title: Power
      - type: entities
        entities:
          - entity: sensor.load_power
          - entity: sensor.phase_a_voltage
          - entity: sensor.phase_a_current
          - entity: sensor.phase_a_power
          - entity: sensor.phase_b_voltage
          - entity: sensor.phase_b_current
          - entity: sensor.phase_b_power
          - entity: sensor.phase_c_voltage
          - entity: sensor.phase_c_current
          - entity: sensor.phase_c_power
          - entity: sensor.meter_active_power
          - entity: sensor.meter_phase_a_active_power
          - entity: sensor.meter_phase_b_active_power
          - entity: sensor.meter_phase_c_active_power
          - entity: sensor.total_backup_power
          - entity: sensor.backup_phase_a_power
          - entity: sensor.backup_phase_b_power
          - entity: sensor.backup_phase_c_power
          - entity: sensor.grid_frequency
        title: Grid / Load
      - type: gauge
        entity: sensor.battery_level
        min: 0
        max: 100
        severity:
          green: 70
          yellow: 40
          red: 20
      - type: entities
        entities:
          - entity: sensor.daily_pv_generation
          - entity: sensor.daily_direct_energy_consumption
          - entity: sensor.daily_exported_energy_from_pv
          - entity: sensor.daily_pv_generation_battery_discharge
          - entity: sensor.daily_battery_charge_from_pv
          - entity: sensor.daily_battery_discharge
          - entity: sensor.daily_exported_energy
          - entity: sensor.daily_battery_charge
          - entity: sensor.daily_imported_energy
          - entity: sensor.total_direct_energy_consumption
          - entity: sensor.total_pv_generation_battery_discharge
          - entity: sensor.total_exported_energy_from_pv
          - entity: sensor.total_battery_charge_from_pv
          - entity: sensor.total_battery_charge
          - entity: sensor.total_battery_discharge
          - entity: sensor.total_pv_generation
          - entity: sensor.total_imported_energy
          - entity: sensor.total_exported_energy
          - entity: sensor.total_consumed_energy
        title: Energy
      - type: entities
        entities:
          - entity: sensor.total_dc_power
          - entity: sensor.mppt1_power
          - entity: sensor.mppt1_voltage
          - entity: sensor.mppt1_current
          - entity: sensor.mppt2_power
          - entity: sensor.mppt2_voltage
          - entity: sensor.mppt2_current
        title: PV Gen
      - type: entities
        entities:
          - entity: sensor.battery_capacity
          - entity: sensor.battery_charging_power
          - entity: sensor.battery_discharging_power
          - entity: sensor.battery_voltage
          - entity: sensor.battery_current
          - entity: sensor.battery_level
          - entity: sensor.battery_state_of_health
          - entity: sensor.battery_temperature
          - entity: sensor.daily_battery_charge_from_pv
          - entity: sensor.daily_battery_charge
          - entity: sensor.daily_battery_discharge
          - entity: sensor.total_battery_charge_from_pv
          - entity: sensor.total_battery_discharge
          - entity: sensor.total_battery_charge
          - entity: sensor.max_soc
          - entity: sensor.min_soc
        title: Battery
      - type: entities
        entities:
          - entity: sensor.ems_mode_selection
          - entity: sensor.battery_forced_charge_discharge_cmd
          - entity: sensor.min_soc
          - entity: sensor.max_soc
          - entity: sensor.battery_forced_charge_discharge_power
          - entity: sensor.battery_charging_start_power
          - entity: sensor.battery_discharging_start_power
          - entity: sensor.bms_max_charging_current
          - entity: sensor.bms_max_discharging_current
        title: EMS
      - type: entities
        entities:
          - entity: sensor.sungrow_device_type
          - entity: sensor.sungrow_inverter_state
          - entity: sensor.running_state
          - entity: sensor.system_state
          - entity: sensor.inverter_temperature
          - entity: binary_sensor.pv_generating
          - entity: binary_sensor.battery_charging
          - entity: binary_sensor.battery_discharging
          - entity: binary_sensor.exporting_power
          - entity: binary_sensor.importing_power
        title: Inverter State
      - chart_type: line
        period: day
        days_to_show: 60
        type: statistics-graph
        entities:
          - sensor.battery_level
        stat_types:
          - min
          - max
        title: Battery SoC last 60 days
      - chart_type: line
        period: day
        days_to_show: 360
        type: statistics-graph
        entities:
          - sensor.battery_level
        stat_types:
          - mean
          - min
          - max
        title: Battery SoC last 360 days
        logarithmic_scale: false
        hide_legend: false
  - title: EMS Control
    icon: mdi:solar-power
    cards:
      - type: entities
        entities:
          - entity: input_select.set_sg_inverter_run_mode
            icon: mdi:power
          - entity: sensor.sigenergy_plant_running_state_2
          - entity: input_select.set_sg_remote_ems_control_mode
          - entity: input_select.set_sg_remote_ems_enable
          - entity: sensor.sigenergy_plant_ems_working_mode_2
        title: Inverter State & EMS Settings
      - type: entities
        entities:
          - entity: input_number.set_sg_min_soc
          - entity: input_number.set_sg_max_soc
          - entity: input_number.set_sg_reserved_soc_for_backup
          - entity: input_number.set_sg_forced_charge_discharge_power
          - entity: input_number.set_sg_battery_max_charge_power
          - entity: input_number.set_sg_battery_max_discharge_power
          - entity: input_number.set_sg_battery_charging_start_power
          - entity: input_number.set_sg_battery_discharging_start_power
        title: Battery Settings
        state_color: false
        show_header_toggle: true
      - type: entities
        entities:
          - entity: sensor.battery_capacity
          - entity: sensor.battery_level
          - entity: sensor.battery_state_of_health
          - entity: sensor.battery_charging_power
          - entity: sensor.battery_discharging_power
          - entity: sensor.min_soc
          - entity: sensor.max_soc
          - entity: sensor.reserved_soc_for_backup
          - entity: sensor.battery_forced_charge_discharge_power
          - entity: sensor.battery_max_charge_power
          - entity: sensor.battery_max_discharge_power
          - entity: sensor.battery_charging_start_power
          - entity: sensor.battery_discharging_start_power
          - entity: sensor.battery_level_nominal
          - entity: sensor.battery_level
          - entity: sensor.battery_charge
          - entity: sensor.battery_charge_nominal
        title: Battery Status
      - type: entities
        entities:
          - entity: sensor.export_power_limit_mode
          - entity: sensor.export_power_limit
          - entity: input_select.set_sg_export_power_limit_mode
          - entity: input_number.set_sg_export_power_limit
        title: Export Settings
  - title: Sigenergy
    path: sigenergy
    cards:
      - type: entities
        entities:
          - input_select.set_sigen_remote_ems
          - input_select.set_sigen_remote_ems_control_mode
          - sensor.sigen_ems_working_mode
        title: EMS settings
      - type: entities
        entities:
          - entity: input_text.set_sigen_ess_max_charging_limit
          - entity: input_text.set_sigen_ess_max_discharging_limit
          - entity: input_text.set_sigen_pv_max_power_limit
          - type: section
            label: For unlimited, set the value to -0.
        title: Limitations
      - type: entities
        entities:
          - type: section
            label: Totals
          - entity: sensor.sigen_pv_power
            icon: mdi:solar-power-variant-outline
          - entity: sensor.sigendev_pv_power
            icon: mdi:solar-power-variant
          - type: section
            label: Calculated power for each string
          - entity: sensor.pv1_power
          - entity: sensor.pv2_power
          - entity: sensor.pv3_power
          - entity: sensor.pv4_power
          - type: section
            label: String 1
          - entity: sensor.sigendev_pv1_current
          - entity: sensor.sigendev_pv1_voltage
          - type: section
            label: String 2
          - entity: sensor.sigendev_pv2_current
          - entity: sensor.sigendev_pv2_voltage
          - type: section
            label: String 3
          - entity: sensor.sigendev_pv3_current
          - entity: sensor.sigendev_pv3_voltage
          - type: section
            label: String 4
          - entity: sensor.sigendev_pv4_current
          - entity: sensor.sigendev_pv4_voltage
        title: PV
      - type: entities
        entities:
          - entity: sensor.sigendev_daily_charge_energy
            name: Today Battery charge
          - entity: sensor.sigendev_daily_discharge_energy
            name: Today Battery discharge
          - entity: sensor.sigen_daily_energy_production
          - entity: sensor.sigendev_daily_import_energy
          - entity: sensor.sigendev_daily_export_energy
          - entity: sensor.sigen_accumulated_energy_consumption
          - entity: sensor.sigen_daily_energy_consumption_2
          - entity: sensor.sigen_accumulated_pv_energy_production
          - entity: sensor.sigen_daily_pv_energy_production
      - type: entities
        entities:
          - type: section
            label: Grid status
          - entity: sensor.sigen_grid_sensor_status_code
          - entity: sensor.sigen_grid_sensor_status_2
          - type: section
            label: Grid power
          - entity: sensor.sigen_grid_active_power
          - entity: sensor.sigen_grid_reactive_power
          - type: section
            label: Grid sensor
          - entity: sensor.sigen_grid_sensor_active_power
          - entity: sensor.sigen_grid_sensor_reactive_power
          - type: section
            label: Grid phases
          - entity: sensor.sigen_grid_phase_a_active_power
          - entity: sensor.sigen_grid_phase_b_active_power
          - entity: sensor.sigen_grid_phase_c_active_power
          - entity: sensor.sigen_grid_phase_c_reactive_power
          - entity: sensor.sigen_grid_phase_a_reactive_power
          - entity: sensor.sigen_grid_phase_b_reactive_power
        title: Grid
      - type: entities
        entities:
          - entity: sensor.sigen_plant_running_state
          - entity: sensor.sigen_plant_active_power
          - entity: sensor.sigen_plant_reactive_power
          - entity: sensor.sigen_pv_power
          - entity: sensor.sigen_plant_phase_a_active_power
          - entity: sensor.sigen_plant_phase_a_reactive_power
          - entity: sensor.sigen_plant_phase_b_active_power
          - entity: sensor.sigen_plant_phase_b_reactive_power
          - entity: sensor.sigen_plant_phase_c_active_power
          - entity: sensor.sigen_plant_phase_c_reactive_power
          - entity: sensor.sigen_output_type
          - entity: sensor.sigen_independent_phase_power_control
        title: Sigen Plant
      - type: entities
        entities:
          - entity: sensor.sigen_used_power
            name: Home usage
            icon: mdi:home-lightning-bolt
          - entity: sensor.sigendev_pv_power
            name: Solar production
            icon: mdi:solar-power
          - entity: sensor.sigen_ess_charge_discharge_power
            name: Battery charge / discharge
            icon: mdi:battery-charging-100
          - entity: sensor.sigen_grid_sensor_active_power
            name: Grid import / export
            icon: mdi:transmission-tower
          - entity: sensor.sigen_plant_active_power
      - type: entities
        entities:
          - entity: sensor.sigen_available_max_active_power
          - entity: sensor.sigen_available_max_charging_capacity
          - entity: sensor.sigen_available_max_charging_power
          - entity: sensor.sigen_available_max_discharging_capacity
          - entity: sensor.sigen_available_max_discharging_power
          - entity: sensor.sigen_available_max_reactive_power
          - entity: sensor.sigen_ess_max_charging_limit
          - entity: sensor.sigen_ess_max_discharging_limit
          - entity: sensor.sigenstor_ess_max_battery_charge_power
          - entity: sensor.sigenstor_ess_max_battery_discharge_power
          - entity: sensor.sigenstor_max_absorbtion_power
          - entity: sensor.sigenstor_max_active_power
          - entity: sensor.sigen_max_apparent_power
          - entity: sensor.sigen_max_rated_apparent_power
          - entity: sensor.sigenstor_max_reactive_power_adjustment_value
          - entity: sensor.sigenstor_max_active_power_adjustment_value
          - entity: sensor.sigen_max_active_power
          - entity: sensor.sigen_pv_max_power_limit
    badges:
      - type: entity
        entity: sensor.sigenergy_device_alarm1
      - type: entity
        entity: sensor.sigenergy_device_alarm2
      - type: entity
        entity: sensor.sigenergy_device_alarm3
      - type: entity
        entity: sensor.sigenergy_device_alarm4
      - type: entity
        entity: sensor.sigenergy_plant_general_alarm1
      - type: entity
        entity: sensor.sigenergy_plant_general_alarm2
      - type: entity
        entity: sensor.sigenergy_plant_general_alarm3
      - type: entity
        entity: sensor.sigenergy_plant_general_alarm4
  - title: Totals
    path: totals
    icon: mdi:group
    cards:
      - type: entities
        entities:
          - entity: sensor.sigen_daily_energy_consumption
          - entity: sensor.sigen_daily_energy_consumption_left
          - entity: sensor.sigen_daily_energy_consumption_right
      - type: entities
        entities:
          - sensor.sigen_daily_pv_energy_production
          - sensor.sigen_daily_pv_energy_production_left
          - sensor.sigen_daily_pv_energy_production_right
      - type: entities
        entities:
          - entity: sensor.sigen_test_daily_energy_consumption_left_recalc3109
          - entity: sensor.sigen_test_daily_energy_consumption_right_recalc3109
          - entity: sensor.sigen_test_daily_energy_consumption_recalc3109
        title: Ta bort 0,13 från daily enery consumption
title: PV System
